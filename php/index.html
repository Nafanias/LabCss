<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    
		<link href="../_app/immutable/assets/0.BvDlPDpL.css" rel="stylesheet">
		<link href="../_app/immutable/assets/3.BmIctdMb.css" rel="stylesheet">
		<link rel="modulepreload" href="../_app/immutable/entry/start.DapwbxaS.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/B5GebygH.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/BHbJhAY1.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/DIeogL5L.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/BKK4-rxC.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/C2a5OBn6.js">
		<link rel="modulepreload" href="../_app/immutable/entry/app.Dm5b1wjr.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/DsMYe4If.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/DNhER_Vi.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Bg9kRutz.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/ueGT1tvS.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/0.SQgMfXqw.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/69_IOA4Y.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CDOwxNrV.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/IHMaz-_q.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/3.Bw3W6vN0.js">
  </head>
  <body>
    <div><!--[--><!--[--><!----><header aria-label="Рога и копыта " class="bx--header"><!----><!----> <!--[--><button type="button" class="bx--header__action bx--header__menu-trigger bx--header__menu-toggle"><!----><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="20" height="20" aria-hidden="true"><!--[!--><!--]--><path d="M4 6H28V8H4zM4 24H28V26H4zM4 12H28V14H4zM4 18H28V20H4z"></path></svg><!----></button><!--]--> <a class="bx--header__name"><!--[--><span class="bx--header__name--prefix"><!---->Рога и копыта <!----></span><!--]--> <!----><!----></a> <!----><nav class="bx--header__nav"><ul role="menubar" class="bx--header__menu-bar"><!----><!----></ul></nav><!----> <div class="bx--header__global"><!----><!--[!--><!--]--> <!--[--><div themes="g10,g80" style="user-select: none;" class="bx--form-item"><input role="switch" type="checkbox" id="ccs-0.ytkyutfg6uk" class="bx--toggle-input bx--toggle-input--small"> <label aria-label="Toggle" for="ccs-0.ytkyutfg6uk" class="bx--toggle-input__label"><span><!----><!----></span> <span class="bx--toggle__switch"><span aria-hidden="true" class="bx--toggle__text--off"><!----><!----></span> <span aria-hidden="true" class="bx--toggle__text--on"><!----><!----></span></span></label></div><!--]--> <!----><!----><!----> <!--[!--><!--[!--><!--[!--><button type="button" tabindex="0" class="bx--btn bx--btn--primary bx--btn--icon-only bx--tooltip__trigger bx--tooltip--a11y bx--btn--icon-only--bottom bx--tooltip--align-center bx--header__action"><!--[--><span class="bx--assistive-text">Profile</span><!--]--> <!----><!----> <!--[--><!----><!----><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="20" height="20" aria-hidden="true" slot="icon"><!--[!--><!--]--><path d="M16,8a5,5,0,1,0,5,5A5,5,0,0,0,16,8Z"></path><path d="M16,2A14,14,0,1,0,30,16,14.0158,14.0158,0,0,0,16,2Zm7.9925,22.9258A5.0016,5.0016,0,0,0,19,20H13a5.0016,5.0016,0,0,0-4.9925,4.9258,12,12,0,1,1,15.985,0Z"></path></svg><!----><!----><!--]--></button><!--]--><!--]--><!--]--><!----> <!--[!--><!--[!--><!--[!--><button type="button" tabindex="0" class="bx--btn bx--btn--primary bx--btn--icon-only bx--tooltip__trigger bx--tooltip--a11y bx--btn--icon-only--bottom bx--tooltip--align-end bx--header__action"><!--[--><span class="bx--assistive-text">Log out</span><!--]--> <!----><!----> <!--[--><!----><!----><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="20" height="20" aria-hidden="true" slot="icon"><!--[!--><!--]--><path d="M6,30H18a2.0023,2.0023,0,0,0,2-2V25H18v3H6V4H18V7h2V4a2.0023,2.0023,0,0,0-2-2H6A2.0023,2.0023,0,0,0,4,4V28A2.0023,2.0023,0,0,0,6,30Z"></path><path d="M20.586 20.586L24.172 17 10 17 10 15 24.172 15 20.586 11.414 22 10 28 16 22 22 20.586 20.586z"></path></svg><!----><!----><!--]--></button><!--]--><!--]--><!--]--><!----><!----></div><!----><!----></header><!----> <!--[--><div class="bx--side-nav__overlay"></div><!--]--> <nav aria-hidden="true" class="bx--side-nav__navigation bx--side-nav bx--side-nav--ux bx--side-nav--collapsed"><!----><ul class="bx--side-nav__items"><!----><li class="bx--side-nav__item"><a href="../" class="bx--side-nav__link"><!--[!--><!--]--> <span class="bx--side-nav__link-text"><!---->Что такое JSON<!----></span></a></li><!---->  <li class="bx--side-nav__item"><button type="button" aria-expanded="false" class="bx--side-nav__submenu"><!--[!--><!--]--> <span class="bx--side-nav__submenu-title">Языки программирования</span> <div class="bx--side-nav__icon bx--side-nav__icon--small bx--side-nav__submenu-chevron"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="16" height="16" aria-hidden="true"><!--[!--><!--]--><path d="M16 22L6 12 7.4 10.6 16 19.2 24.6 10.6 26 12z"></path></svg><!----></div></button> <ul role="menu" class="bx--side-nav__menu"><!----><li class="bx--side-nav__menu-item"><a href="../python" class="bx--side-nav__link"><span class="bx--side-nav__link-text"><!---->Python<!----></span></a></li><!----> <li class="bx--side-nav__menu-item"><a href="../php" class="bx--side-nav__link"><span class="bx--side-nav__link-text"><!---->PHP<!----></span></a></li><!----><!----></ul></li><!----><!----></ul><!----></nav><!----> <main id="main-content" style="margin-left: 0;" class="bx--content"><!----><!--[!--><div class="bx--grid"><!----><!--[!--><div class="bx--row"><!----><!--[!--><div class="bx--col-lg-3"><!----><!----></div><!--]--><!----> <!--[!--><div class="bx--col-sm-4 bx--col-md-8 bx--col-lg-12"><!----><!----><!----><h1 class="svelte-c0j5xz">Работа с JSON в PHP</h1> <p class="svelte-c0j5xz">В PHP поддержка JSON появилась с версии 5.2.0 и работает только с кодировкой UTF-8.</p> <h2 id="encoding" class="svelte-c0j5xz">1. Кодирование</h2> <p class="svelte-c0j5xz"><!--[!--><a rel="noopener noreferrer" href="https://www.php.net/manual/ru/function.json-encode.php" target="_blank" class="bx--link bx--link--visited"><!----><!----><!---->json_encode($value, $options)<!----><!----> <!--[--><div class="bx--link__icon"><!----><!----><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="16" height="16" aria-hidden="true"><!--[!--><!--]--><path d="M26,28H6a2.0027,2.0027,0,0,1-2-2V6A2.0027,2.0027,0,0,1,6,4H16V6H6V26H26V16h2V26A2.0027,2.0027,0,0,1,26,28Z"></path><path d="M20 2L20 4 26.586 4 18 12.586 19.414 14 28 5.414 28 12 30 12 30 2 20 2z"></path></svg><!----><!----></div><!--]--></a><!--]--><!----> – кодирует массив или объект в JSON.</p> <!--[!--><!--[!--><div class="bx--snippet bx--snippet--multi"><div style="width: 100%; min-height: 48px; max-height: 240px;" aria-label="code-snippet" class="bx--snippet-container"><pre><code><!----><!---->$array = array(
	'1' => 'Значение 1', 
	'2' => 'Значение 2', 
	'3' => 'Значение 3', 
	'4' => 'Значение 4', 
	'5' => 'Значение 5'
);
			 
$json = json_encode($array);
echo $json;<!----></code></pre></div> <!--[--><button type="button" aria-live="polite" aria-label="Copy to clipboard" title="Copy to clipboard" class="bx--copy-btn bx--copy"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="16" height="16" aria-hidden="true" class="bx--snippet__icon"><!--[!--><!--]--><path d="M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z"></path><path d="M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z"></path></svg><!----> <span aria-hidden="true" class="bx--assistive-text bx--copy-btn__feedback">Copied!</span></button><!--]--> <!--[--><!--[!--><!--[!--><!--[!--><button type="button" tabindex="0" class="bx--btn bx--btn--sm bx--btn--sm bx--btn--ghost bx--snippet-btn--expand"><!--[!--><!--]--> <!----><span class="bx--snippet-btn--text">Show more</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="16" height="16" role="img" class="bx--icon-chevron--down bx--snippet__icon" aria-label="Show more"><!--[!--><!--]--><path d="M16 22L6 12 7.4 10.6 16 19.2 24.6 10.6 26 12z"></path></svg><!----><!----> <!--[!--><!--[!--><!--]--><!--]--></button><!--]--><!--]--><!--]--><!--]--></div><!--]--><!--]--><!----> <p class="svelte-c0j5xz">Результат:</p> <!--[!--><!--[!--><div class="bx--snippet bx--snippet--no-copy bx--snippet--single"><div style="width: 100%; min-height: 48px; max-height: 240px;" role="textbox" tabindex="0" aria-label="code-snippet" class="bx--snippet-container"><pre><code><!---->&lt;CodeSnippet code="{"1":"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 1","2":"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 2","3":"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 3","4":"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 4","5":"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 5"}" hideCopyButton /><!----></code></pre></div> <!--[!--><!--]--> <!--[!--><!--]--></div><!--]--><!--]--><!----> <p class="svelte-c0j5xz">Как видно кириллица кодируется, исправляется это добавлением опции <span style="color: var(--cds-support-03)">JSON_UNESCAPED_UNICODE.</span></p> <!--[!--><!--[!--><div class="bx--snippet bx--snippet--multi"><div style="width: 100%; min-height: 48px; max-height: 240px;" aria-label="code-snippet" class="bx--snippet-container"><pre><code><!----><!---->$json = json_encode($array, JSON_UNESCAPED_UNICODE);
echo $json;
<!----></code></pre></div> <!--[--><button type="button" aria-live="polite" aria-label="Copy to clipboard" title="Copy to clipboard" class="bx--copy-btn bx--copy"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="16" height="16" aria-hidden="true" class="bx--snippet__icon"><!--[!--><!--]--><path d="M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z"></path><path d="M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z"></path></svg><!----> <span aria-hidden="true" class="bx--assistive-text bx--copy-btn__feedback">Copied!</span></button><!--]--> <!--[--><!--[!--><!--[!--><!--[!--><button type="button" tabindex="0" class="bx--btn bx--btn--sm bx--btn--sm bx--btn--ghost bx--snippet-btn--expand"><!--[!--><!--]--> <!----><span class="bx--snippet-btn--text">Show more</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="16" height="16" role="img" class="bx--icon-chevron--down bx--snippet__icon" aria-label="Show more"><!--[!--><!--]--><path d="M16 22L6 12 7.4 10.6 16 19.2 24.6 10.6 26 12z"></path></svg><!----><!----> <!--[!--><!--[!--><!--]--><!--]--></button><!--]--><!--]--><!--]--><!--]--></div><!--]--><!--]--><!----> <p class="svelte-c0j5xz">Результат:</p> <!--[!--><!--[!--><div class="bx--snippet bx--snippet--no-copy bx--snippet--single"><div style="width: 100%; min-height: 48px; max-height: 240px;" role="textbox" tabindex="0" aria-label="code-snippet" class="bx--snippet-container"><pre><code><!---->{"1":"Значение 1","2":"Значение 2","3":"Значение 3","4":"Значение 4","5":"Значение 5"}<!----></code></pre></div> <!--[!--><!--]--> <!--[!--><!--]--></div><!--]--><!--]--><!----> <p class="svelte-c0j5xz">Далее такую строку можно сохранить в файл, или отдать в браузер, например при AJAX запросах.</p> <!--[!--><!--[!--><div class="bx--snippet bx--snippet--multi"><div style="width: 100%; min-height: 48px; max-height: 240px;" aria-label="code-snippet" class="bx--snippet-container"><pre><code><!----><!---->header('Content-Type: application/json');
echo $json;
exit();
<!----></code></pre></div> <!--[--><button type="button" aria-live="polite" aria-label="Copy to clipboard" title="Copy to clipboard" class="bx--copy-btn bx--copy"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="16" height="16" aria-hidden="true" class="bx--snippet__icon"><!--[!--><!--]--><path d="M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z"></path><path d="M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z"></path></svg><!----> <span aria-hidden="true" class="bx--assistive-text bx--copy-btn__feedback">Copied!</span></button><!--]--> <!--[--><!--[!--><!--[!--><!--[!--><button type="button" tabindex="0" class="bx--btn bx--btn--sm bx--btn--sm bx--btn--ghost bx--snippet-btn--expand"><!--[!--><!--]--> <!----><span class="bx--snippet-btn--text">Show more</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="16" height="16" role="img" class="bx--icon-chevron--down bx--snippet__icon" aria-label="Show more"><!--[!--><!--]--><path d="M16 22L6 12 7.4 10.6 16 19.2 24.6 10.6 26 12z"></path></svg><!----><!----> <!--[!--><!--[!--><!--]--><!--]--></button><!--]--><!--]--><!--]--><!--]--></div><!--]--><!--]--><!----> <h2 id="decoding" class="svelte-c0j5xz">2. Декодирование</h2> <p class="svelte-c0j5xz">Функция <!--[!--><a rel="noopener noreferrer" href="https://www.php.net/manual/ru/function.json-decode.php" target="_blank" class="bx--link bx--link--visited"><!----><!----><!---->json_decode($json)<!----><!----> <!--[--><div class="bx--link__icon"><!----><!----><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="16" height="16" aria-hidden="true"><!--[!--><!--]--><path d="M26,28H6a2.0027,2.0027,0,0,1-2-2V6A2.0027,2.0027,0,0,1,6,4H16V6H6V26H26V16h2V26A2.0027,2.0027,0,0,1,26,28Z"></path><path d="M20 2L20 4 26.586 4 18 12.586 19.414 14 28 5.414 28 12 30 12 30 2 20 2z"></path></svg><!----><!----></div><!--]--></a><!--]--><!----> преобразует строку в объект:</p> <!--[!--><!--[!--><div class="bx--snippet bx--snippet--multi"><div style="width: 100%; min-height: 48px; max-height: 240px;" aria-label="code-snippet" class="bx--snippet-container"><pre><code><!----><!---->$json = '{"1":"Значение 1","2":"Значение 2","3":"Значение 3","4":"Значение 4","5":"Значение 5"}';
$array = json_decode($json);
print_r($array);
<!----></code></pre></div> <!--[--><button type="button" aria-live="polite" aria-label="Copy to clipboard" title="Copy to clipboard" class="bx--copy-btn bx--copy"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="16" height="16" aria-hidden="true" class="bx--snippet__icon"><!--[!--><!--]--><path d="M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z"></path><path d="M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z"></path></svg><!----> <span aria-hidden="true" class="bx--assistive-text bx--copy-btn__feedback">Copied!</span></button><!--]--> <!--[--><!--[!--><!--[!--><!--[!--><button type="button" tabindex="0" class="bx--btn bx--btn--sm bx--btn--sm bx--btn--ghost bx--snippet-btn--expand"><!--[!--><!--]--> <!----><span class="bx--snippet-btn--text">Show more</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="16" height="16" role="img" class="bx--icon-chevron--down bx--snippet__icon" aria-label="Show more"><!--[!--><!--]--><path d="M16 22L6 12 7.4 10.6 16 19.2 24.6 10.6 26 12z"></path></svg><!----><!----> <!--[!--><!--[!--><!--]--><!--]--></button><!--]--><!--]--><!--]--><!--]--></div><!--]--><!--]--><!----> <p class="svelte-c0j5xz">Результат:</p> <!--[!--><!--[!--><div class="bx--snippet bx--snippet--no-copy bx--snippet--multi"><div style="width: 100%; min-height: 48px; max-height: 240px;" aria-label="code-snippet" class="bx--snippet-container"><pre><code><!----><!---->stdClass Object
(
	[1] => Значение 1
	[2] => Значение 2
	[3] => Значение 3
	[4] => Значение 4
	[5] => Значение 5
)
<!----></code></pre></div> <!--[!--><!--]--> <!--[--><!--[!--><!--[!--><!--[!--><button type="button" tabindex="0" class="bx--btn bx--btn--sm bx--btn--sm bx--btn--ghost bx--snippet-btn--expand"><!--[!--><!--]--> <!----><span class="bx--snippet-btn--text">Show more</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="16" height="16" role="img" class="bx--icon-chevron--down bx--snippet__icon" aria-label="Show more"><!--[!--><!--]--><path d="M16 22L6 12 7.4 10.6 16 19.2 24.6 10.6 26 12z"></path></svg><!----><!----> <!--[!--><!--[!--><!--]--><!--]--></button><!--]--><!--]--><!--]--><!--]--></div><!--]--><!--]--><!----> <p class="svelte-c0j5xz">Если добавить вторым аргументом true, то произойдёт преобразование в массив:</p> <!--[!--><!--[!--><div class="bx--snippet bx--snippet--multi"><div style="width: 100%; min-height: 48px; max-height: 240px;" aria-label="code-snippet" class="bx--snippet-container"><pre><code><!----><!---->$json = '{"1":"Значение 1","2":"Значение 2","3":"Значение 3","4":"Значение 4","5":"Значение 5"}';
$array = json_decode($json, true);
print_r($array);
<!----></code></pre></div> <!--[--><button type="button" aria-live="polite" aria-label="Copy to clipboard" title="Copy to clipboard" class="bx--copy-btn bx--copy"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="16" height="16" aria-hidden="true" class="bx--snippet__icon"><!--[!--><!--]--><path d="M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z"></path><path d="M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z"></path></svg><!----> <span aria-hidden="true" class="bx--assistive-text bx--copy-btn__feedback">Copied!</span></button><!--]--> <!--[--><!--[!--><!--[!--><!--[!--><button type="button" tabindex="0" class="bx--btn bx--btn--sm bx--btn--sm bx--btn--ghost bx--snippet-btn--expand"><!--[!--><!--]--> <!----><span class="bx--snippet-btn--text">Show more</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="16" height="16" role="img" class="bx--icon-chevron--down bx--snippet__icon" aria-label="Show more"><!--[!--><!--]--><path d="M16 22L6 12 7.4 10.6 16 19.2 24.6 10.6 26 12z"></path></svg><!----><!----> <!--[!--><!--[!--><!--]--><!--]--></button><!--]--><!--]--><!--]--><!--]--></div><!--]--><!--]--><!----> <p class="svelte-c0j5xz">Результат:</p> <!--[!--><!--[!--><div class="bx--snippet bx--snippet--no-copy bx--snippet--multi"><div style="width: 100%; min-height: 48px; max-height: 240px;" aria-label="code-snippet" class="bx--snippet-container"><pre><code><!----><!---->Array
(
	[1] => Значение 1
	[2] => Значение 2
	[3] => Значение 3
	[4] => Значение 4
	[5] => Значение 5
)
<!----></code></pre></div> <!--[!--><!--]--> <!--[--><!--[!--><!--[!--><!--[!--><button type="button" tabindex="0" class="bx--btn bx--btn--sm bx--btn--sm bx--btn--ghost bx--snippet-btn--expand"><!--[!--><!--]--> <!----><span class="bx--snippet-btn--text">Show more</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="16" height="16" role="img" class="bx--icon-chevron--down bx--snippet__icon" aria-label="Show more"><!--[!--><!--]--><path d="M16 22L6 12 7.4 10.6 16 19.2 24.6 10.6 26 12z"></path></svg><!----><!----> <!--[!--><!--[!--><!--]--><!--]--></button><!--]--><!--]--><!--]--><!--]--></div><!--]--><!--]--><!----> <h2 id="errors" class="svelte-c0j5xz">3. Получение ошибок и их исправление</h2> <p class="svelte-c0j5xz"><span style="color: var(--cds-support-03)">json_decode()</span> возвращает NULL, если в объекте есть ошибки, посмотреть их можно с помощью функции <span style="color: var(--cds-support-03)">json_last_error():</span></p> <!--[!--><!--[!--><div class="bx--snippet bx--snippet--multi"><div style="width: 100%; min-height: 48px; max-height: 240px;" aria-label="code-snippet" class="bx--snippet-container"><pre><code><!----><!---->$json = '{"1:"Значение 1"}';
$array = json_decode($json, true);
			 
switch (json_last_error()) {
	case JSON_ERROR_NONE:
		echo 'Ошибок нет';
	break;
	case JSON_ERROR_DEPTH:
		echo 'Достигнута максимальная глубина стека';
	break;
	case JSON_ERROR_STATE_MISMATCH:
		echo 'Некорректные разряды или несоответствие режимов';
	break;
	case JSON_ERROR_CTRL_CHAR:
		echo 'Некорректный управляющий символ';
	break;
	case JSON_ERROR_SYNTAX:
		echo 'Синтаксическая ошибка, некорректный JSON';
	break;
	case JSON_ERROR_UTF8:
		echo 'Некорректные символы UTF-8, возможно неверно закодирован';
	break;
	default:
		echo 'Неизвестная ошибка';
	break;
}
<!----></code></pre></div> <!--[--><button type="button" aria-live="polite" aria-label="Copy to clipboard" title="Copy to clipboard" class="bx--copy-btn bx--copy"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="16" height="16" aria-hidden="true" class="bx--snippet__icon"><!--[!--><!--]--><path d="M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z"></path><path d="M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z"></path></svg><!----> <span aria-hidden="true" class="bx--assistive-text bx--copy-btn__feedback">Copied!</span></button><!--]--> <!--[--><!--[!--><!--[!--><!--[!--><button type="button" tabindex="0" class="bx--btn bx--btn--sm bx--btn--sm bx--btn--ghost bx--snippet-btn--expand"><!--[!--><!--]--> <!----><span class="bx--snippet-btn--text">Show more</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="16" height="16" role="img" class="bx--icon-chevron--down bx--snippet__icon" aria-label="Show more"><!--[!--><!--]--><path d="M16 22L6 12 7.4 10.6 16 19.2 24.6 10.6 26 12z"></path></svg><!----><!----> <!--[!--><!--[!--><!--]--><!--]--></button><!--]--><!--]--><!--]--><!--]--></div><!--]--><!--]--><!----> <p class="svelte-c0j5xz">Посмотреть значения констант JSON:</p> <!--[!--><!--[!--><div class="bx--snippet bx--snippet--multi"><div style="width: 100%; min-height: 48px; max-height: 240px;" aria-label="code-snippet" class="bx--snippet-container"><pre><code><!----><!---->$constants = get_defined_constants(true);
foreach ($constants['json'] as $name => $value) {
	echo $name . ': ' . $value . '&lt;br>';
}
<!----></code></pre></div> <!--[--><button type="button" aria-live="polite" aria-label="Copy to clipboard" title="Copy to clipboard" class="bx--copy-btn bx--copy"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="16" height="16" aria-hidden="true" class="bx--snippet__icon"><!--[!--><!--]--><path d="M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z"></path><path d="M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z"></path></svg><!----> <span aria-hidden="true" class="bx--assistive-text bx--copy-btn__feedback">Copied!</span></button><!--]--> <!--[--><!--[!--><!--[!--><!--[!--><button type="button" tabindex="0" class="bx--btn bx--btn--sm bx--btn--sm bx--btn--ghost bx--snippet-btn--expand"><!--[!--><!--]--> <!----><span class="bx--snippet-btn--text">Show more</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="16" height="16" role="img" class="bx--icon-chevron--down bx--snippet__icon" aria-label="Show more"><!--[!--><!--]--><path d="M16 22L6 12 7.4 10.6 16 19.2 24.6 10.6 26 12z"></path></svg><!----><!----> <!--[!--><!--[!--><!--]--><!--]--></button><!--]--><!--]--><!--]--><!--]--></div><!--]--><!--]--><!----> <p class="svelte-c0j5xz">Результат:</p> <!--[!--><!--[!--><div class="bx--snippet bx--snippet--no-copy bx--snippet--multi"><div style="width: 100%; min-height: 48px; max-height: 240px;" aria-label="code-snippet" class="bx--snippet-container"><pre><code><!----><!---->JSON_HEX_TAG: 1
JSON_HEX_AMP: 2
JSON_HEX_APOS: 4
JSON_HEX_QUOT: 8
JSON_FORCE_OBJECT: 16
JSON_NUMERIC_CHECK: 32
JSON_UNESCAPED_SLASHES: 64
JSON_PRETTY_PRINT: 128
JSON_UNESCAPED_UNICODE: 256
JSON_PARTIAL_OUTPUT_ON_ERROR: 512
JSON_PRESERVE_ZERO_FRACTION: 1024
JSON_UNESCAPED_LINE_TERMINATORS: 2048
JSON_OBJECT_AS_ARRAY: 1
JSON_BIGINT_AS_STRING: 2
JSON_ERROR_NONE: 0
JSON_ERROR_DEPTH: 1
JSON_ERROR_STATE_MISMATCH: 2
JSON_ERROR_CTRL_CHAR: 3
JSON_ERROR_SYNTAX: 4
JSON_ERROR_UTF8: 5
JSON_ERROR_RECURSION: 6
JSON_ERROR_INF_OR_NAN: 7
JSON_ERROR_UNSUPPORTED_TYPE: 8
JSON_ERROR_INVALID_PROPERTY_NAME: 9
JSON_ERROR_UTF16: 10
<!----></code></pre></div> <!--[!--><!--]--> <!--[--><!--[!--><!--[!--><!--[!--><button type="button" tabindex="0" class="bx--btn bx--btn--sm bx--btn--sm bx--btn--ghost bx--snippet-btn--expand"><!--[!--><!--]--> <!----><span class="bx--snippet-btn--text">Show more</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="16" height="16" role="img" class="bx--icon-chevron--down bx--snippet__icon" aria-label="Show more"><!--[!--><!--]--><path d="M16 22L6 12 7.4 10.6 16 19.2 24.6 10.6 26 12z"></path></svg><!----><!----> <!--[!--><!--[!--><!--]--><!--]--></button><!--]--><!--]--><!--]--><!--]--></div><!--]--><!--]--><!----> <p class="svelte-c0j5xz">Если вы хотите распарсить JS объект из HTML страницы или файла, то скорее всего json_decode вернет ошибку т.к. в коде будут <!--[!--><a rel="noopener noreferrer" href="https://snipp.ru/handbk/table-ascii#link-upravlyayuschie-simvoly" target="_blank" class="bx--link bx--link--visited"><!----><!----><!---->управляющие символы<!----><!----> <!--[--><div class="bx--link__icon"><!----><!----><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="16" height="16" aria-hidden="true"><!--[!--><!--]--><path d="M26,28H6a2.0027,2.0027,0,0,1-2-2V6A2.0027,2.0027,0,0,1,6,4H16V6H6V26H26V16h2V26A2.0027,2.0027,0,0,1,26,28Z"></path><path d="M20 2L20 4 26.586 4 18 12.586 19.414 14 28 5.414 28 12 30 12 30 2 20 2z"></path></svg><!----><!----></div><!--]--></a><!--]--><!----> или BOM. Удалить их можно следующим образом:</p> <!--[!--><!--[!--><div class="bx--snippet bx--snippet--multi"><div style="width: 100%; min-height: 48px; max-height: 240px;" aria-label="code-snippet" class="bx--snippet-container"><pre><code><!----><!---->$json = '{...}';

// Удаление управляющих символов
for ($i = 0; $i &lt;= 31; ++$i) { 
	$json = str_replace(chr($i), '', $json); 
}
			 
// Удаление символа Delete
$json = str_replace(chr(127), '', $json);
			 
// Удаление BOM
if (0 === strpos(bin2hex($json), 'efbbbf')) {
	$json = substr($json, 3);
}
			 
$res = json_decode($json, true);
print_r($res);
<!----></code></pre></div> <!--[--><button type="button" aria-live="polite" aria-label="Copy to clipboard" title="Copy to clipboard" class="bx--copy-btn bx--copy"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="16" height="16" aria-hidden="true" class="bx--snippet__icon"><!--[!--><!--]--><path d="M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z"></path><path d="M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z"></path></svg><!----> <span aria-hidden="true" class="bx--assistive-text bx--copy-btn__feedback">Copied!</span></button><!--]--> <!--[--><!--[!--><!--[!--><!--[!--><button type="button" tabindex="0" class="bx--btn bx--btn--sm bx--btn--sm bx--btn--ghost bx--snippet-btn--expand"><!--[!--><!--]--> <!----><span class="bx--snippet-btn--text">Show more</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="16" height="16" role="img" class="bx--icon-chevron--down bx--snippet__icon" aria-label="Show more"><!--[!--><!--]--><path d="M16 22L6 12 7.4 10.6 16 19.2 24.6 10.6 26 12z"></path></svg><!----><!----> <!--[!--><!--[!--><!--]--><!--]--></button><!--]--><!--]--><!--]--><!--]--></div><!--]--><!--]--><!----> <h2 id="http" class="svelte-c0j5xz">4. HTTP-запросы в формате JSON</h2> <p class="svelte-c0j5xz">Некоторые сервисы требуют чтобы запросы к ним осуществлялись в формате JSON, такой запрос можно сформировать в CURL:</p> <!--[!--><!--[!--><div class="bx--snippet bx--snippet--multi"><div style="width: 100%; min-height: 48px; max-height: 240px;" aria-label="code-snippet" class="bx--snippet-container"><pre><code><!----><!---->$data = array(
	'name' => 'snipp.ru'
	'text' => 'Отправка сообщения',
);
			 
$ch = curl_init('https://example.com');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/json')); 	
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($data));
$res = curl_exec($ch);
curl_close($ch);
<!----></code></pre></div> <!--[--><button type="button" aria-live="polite" aria-label="Copy to clipboard" title="Copy to clipboard" class="bx--copy-btn bx--copy"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="16" height="16" aria-hidden="true" class="bx--snippet__icon"><!--[!--><!--]--><path d="M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z"></path><path d="M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z"></path></svg><!----> <span aria-hidden="true" class="bx--assistive-text bx--copy-btn__feedback">Copied!</span></button><!--]--> <!--[--><!--[!--><!--[!--><!--[!--><button type="button" tabindex="0" class="bx--btn bx--btn--sm bx--btn--sm bx--btn--ghost bx--snippet-btn--expand"><!--[!--><!--]--> <!----><span class="bx--snippet-btn--text">Show more</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="16" height="16" role="img" class="bx--icon-chevron--down bx--snippet__icon" aria-label="Show more"><!--[!--><!--]--><path d="M16 22L6 12 7.4 10.6 16 19.2 24.6 10.6 26 12z"></path></svg><!----><!----> <!--[!--><!--[!--><!--]--><!--]--></button><!--]--><!--]--><!--]--><!--]--></div><!--]--><!--]--><!----> <p class="svelte-c0j5xz">А также могут обратится к вашим скриптам в таком формате, чтение JSON запроса.</p> <!--[!--><!--[!--><div class="bx--snippet bx--snippet--multi"><div style="width: 100%; min-height: 48px; max-height: 240px;" aria-label="code-snippet" class="bx--snippet-container"><pre><code><!----><!---->$data = file_get_contents('php://input');
$data = json_decode($data, true);
<!----></code></pre></div> <!--[--><button type="button" aria-live="polite" aria-label="Copy to clipboard" title="Copy to clipboard" class="bx--copy-btn bx--copy"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="16" height="16" aria-hidden="true" class="bx--snippet__icon"><!--[!--><!--]--><path d="M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z"></path><path d="M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z"></path></svg><!----> <span aria-hidden="true" class="bx--assistive-text bx--copy-btn__feedback">Copied!</span></button><!--]--> <!--[--><!--[!--><!--[!--><!--[!--><button type="button" tabindex="0" class="bx--btn bx--btn--sm bx--btn--sm bx--btn--ghost bx--snippet-btn--expand"><!--[!--><!--]--> <!----><span class="bx--snippet-btn--text">Show more</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="16" height="16" role="img" class="bx--icon-chevron--down bx--snippet__icon" aria-label="Show more"><!--[!--><!--]--><path d="M16 22L6 12 7.4 10.6 16 19.2 24.6 10.6 26 12z"></path></svg><!----><!----> <!--[!--><!--[!--><!--]--><!--]--></button><!--]--><!--]--><!--]--><!--]--></div><!--]--><!--]--><!----><!----><!----><!----></div><!--]--><!----><!----></div><!--]--><!----></div><!--]--><!----></main><!----> <nav aria-label="pagination" class="bx--pagination-nav"><ul class="bx--pagination-nav__list"><li class="bx--pagination-nav__list-item"><!--[!--><!--[!--><!--[!--><button type="button" tabindex="0" disabled aria-pressed="false" class="bx--btn bx--btn--ghost bx--btn--disabled bx--btn--icon-only bx--tooltip__trigger bx--tooltip--a11y bx--btn--icon-only--bottom bx--tooltip--align-center"><!--[--><span class="bx--assistive-text">Previous page</span><!--]--> <!----><!----> <!--[!--><!--[--><!----><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="16" height="16" aria-hidden="true" role="img" style="margin-left: 0" class="bx--btn__icon" aria-label="Previous page"><!--[!--><!--]--><path d="M20 24L10 16 20 8z"></path></svg><!----><!--]--><!--]--></button><!--]--><!--]--><!--]--><!----></li> <!--[--><li class="bx--pagination-nav__list-item"><button type="button" data-page="1" aria-current="page" class="bx--pagination-nav__page bx--pagination-nav__page--active"><span class="bx--pagination-nav__accessibility-label"><!----><!---->Active, Page<!----></span> 1</button></li><!--]--> <!--[!--><!--[!--><!--]--><!--]--><!----> <!--[--><li class="bx--pagination-nav__list-item"><button type="button" data-page="2" class="bx--pagination-nav__page"><span class="bx--pagination-nav__accessibility-label"><!----><!---->Active, Page<!----></span> 2</button></li><li class="bx--pagination-nav__list-item"><button type="button" data-page="3" class="bx--pagination-nav__page"><span class="bx--pagination-nav__accessibility-label"><!----><!---->Page<!----></span> 3</button></li><li class="bx--pagination-nav__list-item"><button type="button" data-page="4" class="bx--pagination-nav__page"><span class="bx--pagination-nav__accessibility-label"><!----><!---->Page<!----></span> 4</button></li><li class="bx--pagination-nav__list-item"><button type="button" data-page="5" class="bx--pagination-nav__page"><span class="bx--pagination-nav__accessibility-label"><!----><!---->Page<!----></span> 5</button></li><li class="bx--pagination-nav__list-item"><button type="button" data-page="6" class="bx--pagination-nav__page"><span class="bx--pagination-nav__accessibility-label"><!----><!---->Page<!----></span> 6</button></li><!--]--> <!--[!--><!--[!--><!--]--><!--]--><!----> <!--[--><li class="bx--pagination-nav__list-item"><button type="button" data-page="7" class="bx--pagination-nav__page"><span class="bx--pagination-nav__accessibility-label"><!----><!---->Page<!----></span> 7</button></li><!--]--> <li class="bx--pagination-nav__list-item"><!--[!--><!--[!--><!--[!--><button type="button" tabindex="0" aria-pressed="false" class="bx--btn bx--btn--ghost bx--btn--icon-only bx--tooltip__trigger bx--tooltip--a11y bx--btn--icon-only--bottom bx--tooltip--align-center"><!--[--><span class="bx--assistive-text">Next page</span><!--]--> <!----><!----> <!--[!--><!--[--><!----><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" preserveAspectRatio="xMidYMid meet" width="16" height="16" aria-hidden="true" role="img" style="margin-left: 0" class="bx--btn__icon" aria-label="Next page"><!--[!--><!--]--><path d="M12 8L22 16 12 24z"></path></svg><!----><!--]--><!--]--></button><!--]--><!--]--><!--]--><!----></li></ul> <div aria-live="polite" aria-atomic="true" class="bx--pagination-nav__accessibility-label">Page
    2
    of
    7</div></nav><!----> <footer class="footer-container svelte-7k0dbs">© 2024 Рога и копыта. Все права защищены.</footer><!----><!----><!--]--> <!--[!--><!--]--><!--]-->
			
			<script>
				{
					__sveltekit_1d4ckgv = {
						base: new URL("..", location).pathname.slice(0, -1),
						assets: "/LabCss"
					};

					const element = document.currentScript.parentElement;

					Promise.all([
						import("../_app/immutable/entry/start.DapwbxaS.js"),
						import("../_app/immutable/entry/app.Dm5b1wjr.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 3],
							data: [null,null],
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
  </body>
</html>
