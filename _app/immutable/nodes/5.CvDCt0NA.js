import"../chunks/Bg9kRutz.js";import"../chunks/69_IOA4Y.js";import{t as ae,h as V,w as le,x as j,s as o,y as b,v as F,E as q,F as W,G as ee,e as Z,g as M,H as ne,n as i}from"../chunks/MOftl_Qc.js";import{c as w,a as r,t as I,n as re,b as d}from"../chunks/DcT4jPJw.js";import{e as ie,a as L,s as Q,t as h,b as $}from"../chunks/DwJlcgXE.js";import{l as U,p as x,i as B,b as te,c as se,s as ce}from"../chunks/C2klo-4v.js";import{e as T,s as de}from"../chunks/BpDWr5A5.js";import{i as oe}from"../chunks/nuXVpN-5.js";import{C as _}from"../chunks/CcsI_mK9.js";var ue=I("<div><!></div>"),_e=I("<a><!> <!></a>"),ve=I("<div><!></div>"),pe=I("<a><!> <!></a>");function he(y,s){const u=ie(s),J=U(s,["children","$$slots","$$events","$$legacy"]),n=U(J,["size","href","inline","icon","disabled","visited","ref"]);ae(s,!1);let O=x(s,"size",8,void 0),f=x(s,"href",8,void 0),v=x(s,"inline",8,!1),p=x(s,"icon",8,void 0),R=x(s,"disabled",8,!1),A=x(s,"visited",8,!1),N=x(s,"ref",12,null);oe();var S=w(),P=V(S);{var g=E=>{var a=_e();let m;var C=j(a);L(C,s,"default",{},null);var z=o(C,2);{var k=l=>{var t=ue();h(t,"bx--link__icon",!0);var c=j(t);L(c,s,"icon",{},e=>{var H=w(),Y=V(H);se(Y,p,(X,G)=>{G(X,{})}),r(e,H)}),b(t),r(l,t)};B(z,l=>{!v()&&(u.icon||p())&&l(k)})}b(a),te(a,l=>N(l),()=>N()),F(()=>{m=Q(a,m,{role:"link","aria-disabled":"true",...n}),h(a,"bx--link",!0),h(a,"bx--link--disabled",R()),h(a,"bx--link--inline",v()),h(a,"bx--link--visited",A())}),T("click",a,function(l){$.call(this,s,l)}),T("mouseover",a,function(l){$.call(this,s,l)}),T("mouseenter",a,function(l){$.call(this,s,l)}),T("mouseleave",a,function(l){$.call(this,s,l)}),r(E,a)},D=E=>{var a=pe();let m;var C=j(a);L(C,s,"default",{},null);var z=o(C,2);{var k=l=>{var t=ve();h(t,"bx--link__icon",!0);var c=j(t);L(c,s,"icon",{},e=>{var H=w(),Y=V(H);se(Y,p,(X,G)=>{G(X,{})}),r(e,H)}),b(t),r(l,t)};B(z,l=>{!v()&&(u.icon||p())&&l(k)})}b(a),te(a,l=>N(l),()=>N()),F(()=>{m=Q(a,m,{rel:n.target==="_blank"?"noopener noreferrer":void 0,href:f(),...n}),h(a,"bx--link",!0),h(a,"bx--link--disabled",R()),h(a,"bx--link--inline",v()),h(a,"bx--link--visited",A()),h(a,"bx--link--sm",O()==="sm"),h(a,"bx--link--lg",O()==="lg")}),T("click",a,function(l){$.call(this,s,l)}),T("mouseover",a,function(l){$.call(this,s,l)}),T("mouseenter",a,function(l){$.call(this,s,l)}),T("mouseleave",a,function(l){$.call(this,s,l)}),r(E,a)};B(P,E=>{R()?E(g):E(D,!1)})}r(y,S),le()}var $e=re("<title> </title>"),fe=re('<svg><!><path d="M26,28H6a2.0027,2.0027,0,0,1-2-2V6A2.0027,2.0027,0,0,1,6,4H16V6H6V26H26V16h2V26A2.0027,2.0027,0,0,1,26,28Z"></path><path d="M20 2L20 4 26.586 4 18 12.586 19.414 14 28 5.414 28 12 30 12 30 2 20 2z"></path></svg>');function Re(y,s){const u=U(s,["children","$$slots","$$events","$$legacy"]),J=U(u,["size","title"]);ae(s,!1);const n=ee(),O=ee();let f=x(s,"size",8,16),v=x(s,"title",8,void 0);q(()=>(Z(u),Z(v())),()=>{W(n,u["aria-label"]||u["aria-labelledby"]||v())}),q(()=>(M(n),Z(u)),()=>{W(O,{"aria-hidden":M(n)?void 0:!0,role:M(n)?"img":void 0,focusable:Number(u.tabindex)===0?!0:void 0})}),ne(),oe();var p=fe();let R;var A=j(p);{var N=S=>{var P=$e(),g=j(P,!0);b(P),F(()=>de(g,v())),r(S,P)};B(A,S=>{v()&&S(N)})}i(2),b(p),F(()=>R=Q(p,R,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",preserveAspectRatio:"xMidYMid meet",width:f(),height:f(),...M(O),...J},void 0,!0)),r(y,p),le()}function K(y,s){const u=U(s,["children","$$slots","$$events","$$legacy"]),J=U(u,[]);he(y,ce(()=>J,{target:"_blank",icon:Re,$$events:{click(n){$.call(this,s,n)},mouseover(n){$.call(this,s,n)},mouseenter(n){$.call(this,s,n)},mouseleave(n){$.call(this,s,n)}},children:(n,O)=>{var f=w(),v=V(f);L(v,s,"default",{},null),r(n,f)},$$slots:{default:!0}}))}var Oe=I('<h1 class="svelte-c0j5xz">Работа с JSON в PHP</h1> <p class="svelte-c0j5xz">В PHP поддержка JSON появилась с версии 5.2.0 и работает только с кодировкой UTF-8.</p> <h2 id="encoding" class="svelte-c0j5xz">1. Кодирование</h2> <p class="svelte-c0j5xz"><!> – кодирует массив или объект в JSON.</p> <!> <p class="svelte-c0j5xz">Результат:</p> <!> <p class="svelte-c0j5xz">Как видно кириллица кодируется, исправляется это добавлением опции <span style="color: var(--cds-support-03)">JSON_UNESCAPED_UNICODE.</span></p> <!> <p class="svelte-c0j5xz">Результат:</p> <!> <p class="svelte-c0j5xz">Далее такую строку можно сохранить в файл, или отдать в браузер, например при AJAX запросах.</p> <!> <h2 id="decoding" class="svelte-c0j5xz">2. Декодирование</h2> <p class="svelte-c0j5xz">Функция <!> преобразует строку в объект:</p> <!> <p class="svelte-c0j5xz">Результат:</p> <!> <p class="svelte-c0j5xz">Если добавить вторым аргументом true, то произойдёт преобразование в массив:</p> <!> <p class="svelte-c0j5xz">Результат:</p> <!> <h2 id="errors" class="svelte-c0j5xz">3. Получение ошибок и их исправление</h2> <p class="svelte-c0j5xz"><span style="color: var(--cds-support-03)">json_decode()</span> возвращает NULL, если в объекте есть ошибки, посмотреть их можно с помощью функции <span style="color: var(--cds-support-03)">json_last_error():</span></p> <!> <p class="svelte-c0j5xz">Посмотреть значения констант JSON:</p> <!> <p class="svelte-c0j5xz">Результат:</p> <!> <p class="svelte-c0j5xz">Если вы хотите распарсить JS объект из HTML страницы или файла, то скорее всего json_decode вернет ошибку т.к. в коде будут <!> или BOM. Удалить их можно следующим образом:</p> <!> <h2 id="http" class="svelte-c0j5xz">4. HTTP-запросы в формате JSON</h2> <p class="svelte-c0j5xz">Некоторые сервисы требуют чтобы запросы к ним осуществлялись в формате JSON, такой запрос можно сформировать в CURL:</p> <!> <p class="svelte-c0j5xz">А также могут обратится к вашим скриптам в таком формате, чтение JSON запроса.</p> <!>',1);function ye(y){var s=Oe(),u=o(V(s),6),J=j(u);K(J,{visited:!0,href:"https://www.php.net/manual/ru/function.json-encode.php",children:(t,c)=>{i();var e=d("json_encode($value, $options)");r(t,e)},$$slots:{default:!0}}),i(),b(u);var n=o(u,2);_(n,{type:"multi",children:(t,c)=>{i();var e=d();e.nodeValue=`$array = array(
	'1' => 'Значение 1', 
	'2' => 'Значение 2', 
	'3' => 'Значение 3', 
	'4' => 'Значение 4', 
	'5' => 'Значение 5'
);
			 
$json = json_encode($array);
echo $json;`,r(t,e)},$$slots:{default:!0}});var O=o(n,4);_(O,{code:'<CodeSnippet code="{"1":"\\u0417\\u043d\\u0430\\u0447\\u0435\\u043d\\u0438\\u0435 1","2":"\\u0417\\u043d\\u0430\\u0447\\u0435\\u043d\\u0438\\u0435 2","3":"\\u0417\\u043d\\u0430\\u0447\\u0435\\u043d\\u0438\\u0435 3","4":"\\u0417\\u043d\\u0430\\u0447\\u0435\\u043d\\u0438\\u0435 4","5":"\\u0417\\u043d\\u0430\\u0447\\u0435\\u043d\\u0438\\u0435 5"}" hideCopyButton />',hideCopyButton:!0});var f=o(O,4);_(f,{type:"multi",children:(t,c)=>{i();var e=d();e.nodeValue=`$json = json_encode($array, JSON_UNESCAPED_UNICODE);
echo $json;
`,r(t,e)},$$slots:{default:!0}});var v=o(f,4);_(v,{code:'{"1":"Значение 1","2":"Значение 2","3":"Значение 3","4":"Значение 4","5":"Значение 5"}',hideCopyButton:!0});var p=o(v,4);_(p,{type:"multi",children:(t,c)=>{i();var e=d();e.nodeValue=`header('Content-Type: application/json');
echo $json;
exit();
`,r(t,e)},$$slots:{default:!0}});var R=o(p,4),A=o(j(R));K(A,{visited:!0,href:"https://www.php.net/manual/ru/function.json-decode.php",children:(t,c)=>{i();var e=d("json_decode($json)");r(t,e)},$$slots:{default:!0}}),i(),b(R);var N=o(R,2);_(N,{type:"multi",children:(t,c)=>{i();var e=d();e.nodeValue=`$json = '{"1":"Значение 1","2":"Значение 2","3":"Значение 3","4":"Значение 4","5":"Значение 5"}';
$array = json_decode($json);
print_r($array);
`,r(t,e)},$$slots:{default:!0}});var S=o(N,4);_(S,{type:"multi",hideCopyButton:!0,children:(t,c)=>{i();var e=d();e.nodeValue=`stdClass Object
(
	[1] => Значение 1
	[2] => Значение 2
	[3] => Значение 3
	[4] => Значение 4
	[5] => Значение 5
)
`,r(t,e)},$$slots:{default:!0}});var P=o(S,4);_(P,{type:"multi",children:(t,c)=>{i();var e=d();e.nodeValue=`$json = '{"1":"Значение 1","2":"Значение 2","3":"Значение 3","4":"Значение 4","5":"Значение 5"}';
$array = json_decode($json, true);
print_r($array);
`,r(t,e)},$$slots:{default:!0}});var g=o(P,4);_(g,{type:"multi",hideCopyButton:!0,children:(t,c)=>{i();var e=d();e.nodeValue=`Array
(
	[1] => Значение 1
	[2] => Значение 2
	[3] => Значение 3
	[4] => Значение 4
	[5] => Значение 5
)
`,r(t,e)},$$slots:{default:!0}});var D=o(g,6);_(D,{type:"multi",children:(t,c)=>{i();var e=d();e.nodeValue=`$json = '{"1:"Значение 1"}';
$array = json_decode($json, true);
			 
switch (json_last_error()) {
	case JSON_ERROR_NONE:
		echo 'Ошибок нет';
	break;
	case JSON_ERROR_DEPTH:
		echo 'Достигнута максимальная глубина стека';
	break;
	case JSON_ERROR_STATE_MISMATCH:
		echo 'Некорректные разряды или несоответствие режимов';
	break;
	case JSON_ERROR_CTRL_CHAR:
		echo 'Некорректный управляющий символ';
	break;
	case JSON_ERROR_SYNTAX:
		echo 'Синтаксическая ошибка, некорректный JSON';
	break;
	case JSON_ERROR_UTF8:
		echo 'Некорректные символы UTF-8, возможно неверно закодирован';
	break;
	default:
		echo 'Неизвестная ошибка';
	break;
}
`,r(t,e)},$$slots:{default:!0}});var E=o(D,4);_(E,{type:"multi",children:(t,c)=>{i();var e=d();e.nodeValue=`$constants = get_defined_constants(true);
foreach ($constants['json'] as $name => $value) {
	echo $name . ': ' . $value . '<br>';
}
`,r(t,e)},$$slots:{default:!0}});var a=o(E,4);_(a,{type:"multi",hideCopyButton:!0,children:(t,c)=>{i();var e=d();e.nodeValue=`JSON_HEX_TAG: 1
JSON_HEX_AMP: 2
JSON_HEX_APOS: 4
JSON_HEX_QUOT: 8
JSON_FORCE_OBJECT: 16
JSON_NUMERIC_CHECK: 32
JSON_UNESCAPED_SLASHES: 64
JSON_PRETTY_PRINT: 128
JSON_UNESCAPED_UNICODE: 256
JSON_PARTIAL_OUTPUT_ON_ERROR: 512
JSON_PRESERVE_ZERO_FRACTION: 1024
JSON_UNESCAPED_LINE_TERMINATORS: 2048
JSON_OBJECT_AS_ARRAY: 1
JSON_BIGINT_AS_STRING: 2
JSON_ERROR_NONE: 0
JSON_ERROR_DEPTH: 1
JSON_ERROR_STATE_MISMATCH: 2
JSON_ERROR_CTRL_CHAR: 3
JSON_ERROR_SYNTAX: 4
JSON_ERROR_UTF8: 5
JSON_ERROR_RECURSION: 6
JSON_ERROR_INF_OR_NAN: 7
JSON_ERROR_UNSUPPORTED_TYPE: 8
JSON_ERROR_INVALID_PROPERTY_NAME: 9
JSON_ERROR_UTF16: 10
`,r(t,e)},$$slots:{default:!0}});var m=o(a,2),C=o(j(m));K(C,{visited:!0,href:"https://snipp.ru/handbk/table-ascii#link-upravlyayuschie-simvoly",children:(t,c)=>{i();var e=d("управляющие символы");r(t,e)},$$slots:{default:!0}}),i(),b(m);var z=o(m,2);_(z,{type:"multi",children:(t,c)=>{i();var e=d();e.nodeValue=`$json = '{...}';

// Удаление управляющих символов
for ($i = 0; $i <= 31; ++$i) { 
	$json = str_replace(chr($i), '', $json); 
}
			 
// Удаление символа Delete
$json = str_replace(chr(127), '', $json);
			 
// Удаление BOM
if (0 === strpos(bin2hex($json), 'efbbbf')) {
	$json = substr($json, 3);
}
			 
$res = json_decode($json, true);
print_r($res);
`,r(t,e)},$$slots:{default:!0}});var k=o(z,6);_(k,{type:"multi",children:(t,c)=>{i();var e=d();e.nodeValue=`$data = array(
	'name' => 'snipp.ru'
	'text' => 'Отправка сообщения',
);
			 
$ch = curl_init('https://example.com');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/json')); 	
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($data));
$res = curl_exec($ch);
curl_close($ch);
`,r(t,e)},$$slots:{default:!0}});var l=o(k,4);_(l,{type:"multi",children:(t,c)=>{i();var e=d();e.nodeValue=`$data = file_get_contents('php://input');
$data = json_decode($data, true);
`,r(t,e)},$$slots:{default:!0}}),r(y,s)}export{ye as component};
